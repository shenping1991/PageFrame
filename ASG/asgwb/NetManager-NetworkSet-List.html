<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <title>网卡设置</title>

    <!--全局通用!-->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/global.css">
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <!--全局通用end!-->

    <!--[if lt IE 9]>
    <script src="js/html5shiv/html5shiv.js"></script>
    <script src="js/respond/respond.min.js"></script>
    <![endif]-->

</head>
<body>
<div class="dsm-rightside ">
    <div class="mainnav">
        <div class="urlindex">
            <i class="icon icon-home"></i>
            <a class="name dsmfontblue" href="home.html">首页</a>
            <i class="icon icon-right"></i>
            <a class="name dsmfontblue" href="javascript:void(0);">网络管理</a>
            <i class="icon icon-curright"></i>
            <span class="curname">网卡设置</span>
        </div>
    </div>
    <div class="maincontent">
        <div class="mainbox">
            <div class="btn-toolbar">
                <a class="btn btn-primary btn-tool js_add" ><i class="btnicon icon-toolbar icon-add-white"></i>新增</a>
                <a class="btn btn-primary btn-tool  js_del" ><i class="btnicon icon-toolbar icon-delete"></i>删除</a>
                <a class="btn btn-primary btn-tool  js_restart" ><i class="btnicon icon-toolbar icon-restart"></i>重启</a>

            </div>
            <div class="table-view">
                <table id="datalist" class="table" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t2"  class="js_checkboxAll" data-allcheckfor="uids"  name="">
                                <label for="t2"></label>
                            </div>
                        </th>
                        <th>接口</th>
                        <th>硬件地址</th>
                        <th>IP地址</th>
                        <th>子网掩码</th>
                        <th>默认网关</th>
                        <th>描述</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t21" name="uids">
                                <label for="t21"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" data-id="eth0" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t22" name="uids">
                                <label for="t22"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" data-id="eth1" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t23" name="uids">
                                <label for="t23"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" data-id="eth2" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t24" name="uids">
                                <label for="t24"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" data-id="eth3" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t25" name="uids">
                                <label for="t25"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t26" name="uids">
                                <label for="t26"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t27" name="uids">
                                <label for="t27"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t28" name="uids">
                                <label for="t28"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="dsmcheckbox">
                                <input type="checkbox" value="1" id="t29" name="uids">
                                <label for="t29"></label>
                            </div>
                        </td>
                        <td><a href="javascript:void(0);" class="js_edit">eth0</a></td>
                        <td>00:0c:23:4c:68:99</td>
                        <td>192.168.1.48</td>
                        <td>255.255.255.0</td>
                        <td>192.168.1.1</td>
                        <td>-</td>
                    </tr>
                    </tbody>
                </table>
                <div class="pagebox">
				    	<span class="showinfo">
				    		<span class="lengthinput">
					    		<select class="page-length">
									<option>1</option>
									<option>2</option>
									<option>3</option>
									<option>4</option>
									<option>5</option>
								</select>
							</span>
				    		<span class="lengthinfo">条/页</span>显示
					    	<span class="start-index">1</span>-
					    	<span class="end-index">5</span>条记录，共
					    	<span class="total">5</span>条记录
				    	</span>
                    <span class="buttoninfo">
						    <div class="dsm-laypage" >
						        <a href="javascript:;" class="dsm-laypage-prev" data-page="7">上一页</a>
						        <a href="javascript:;" data-page="1">1</a><a href="javascript:;" data-page="2">2</a>
						        <span class="dsm-laypage-curr"><em class="dsm-laypage-em"></em><em>3</em></span>
						        <span>…</span>
						        <a href="javascript:;" data-page="100">100</a>
						        <a href="javascript:;" class="dsm-laypage-next" data-page="9">下一页</a>
						        <span class="dsm-laypage-total">跳转到
						            <input type="number" min="1" value="8" class="dsm-laypage-skip">页
						            <button type="button" class="dsm-laypage-btn">确定</button>
						        </span>
						    </div>
				    	</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!--新增/修改网卡-->
<div  class="NetForm" style="display: none">
    <div class="dsmForms">
        <div class="dsm-form-item">
            <div class="dsm-inline">
                <label class="dsm-form-label">接口：</label>
                <div class="dsm-input-inline w350">
                    <select  class="dsm-select">
                        <option>eth0</option>
                        <option>eth1</option>
                    </select>
                </div>

            </div>
            <div class="dsm-inline">
                <label class="dsm-form-label">IP地址：</label>
                <div class="dsm-input-inline ">
                    <input  id="txt_IPAddress" type="text" autocomplete="off" placeholder="IP地址" class="dsm-input">

                </div>
                <div class="desc"><em>*</em>必填</div>
                <div class="line-tip error" ><i class="icon icon-error"></i>IP地址发生冲突</div>

            </div>
            <div class="dsm-inline">
                <label class="dsm-form-label">子网掩码：</label>
                <div class="dsm-input-inline ">
                    <input id="txt_subnetMark" type="text" autocomplete="off" placeholder="子网掩码" class="dsm-input">

                </div>
                <div class="desc"><em>*</em>必填</div>
                <div class="line-tip error" ><i class="icon icon-error"></i>子网掩码不能为空</div>
            </div>
            <div class="dsm-inline">
                <label class="dsm-form-label">默认网关：</label>
                <div class="dsm-input-inline ">
                    <input type="text" autocomplete="off" placeholder="默认网关" class="dsm-input">
                </div>

            </div>
            <div class="dsm-inline">
                <label class="dsm-form-label">描述：</label>
                <div class="dsm-input-inline ">
                    <textarea name="" id="txt_desc" cols="10" rows="2" class="dsm-textarea"></textarea>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="js/site.js"></script>
<script type="text/javascript">
    $(document).ready(function() {

        //新增
        $(document).on('click', '.js_add', function (e) {
            $(".NetForm").attr('id',"addNetForm");
            dsmDialog.open({
                type: 1,
                area:['560px','540px'],
                btn:['新增','取消'],
                title:"新增虚拟网卡",
                content: $('#addNetForm'),
                yes: function(index, layero){
                    var IPset=checkIsNull("#txt_IPAddress");
                    var subnetMark=checkIsNull("#txt_subnetMark");
                    if(IPset && subnetMark){
                        dsmDialog.msg('新增成功!');
                        dsmDialog.close(index);
                        //初始化输入控件
                        clear();
                    }
                }
            });
        });
        //初始化输入控件
        function clear(){
            $(".dsm-input").val("");
            $(".dsm-textarea").val("");
            $(".dsm-select option:first").prop("selected", 'selected');
        }
        //新增-输入框触发事件
        $(document).on('blur','#txt_IPAddress',function(){
            if(checkIsNull("#txt_IPAddress")){
                removeErrorTip(this);
            }
        })
        $(document).on('blur','#txt_subnetMark',function(){
            if(checkIsNull("#txt_subnetMark")){
                removeErrorTip(this);
            }
        })
        //新增-检查必填项
        function checkIsNull(obj) {
            var val=$.trim($(obj).val());
            if(val==""){
                $(obj).parent().next().next('.line-tip').css('display','block');
                return false;
            }
            else{
                return true;
            }
        }
        //新增-移除错误提示
        function removeErrorTip(obj) {
            $(obj).parent().next().next('.line-tip').css('display','none');
        }
        //修改
        $(document).on('click', '.js_edit', function (e) {
            editNet(this);
        });
        var chkItem="";//获取当前选中项
        //删除
        $(document).on('click', '.js_del', function (e) {
            chkItem=itemSelected_check("uids");
            if(chkItem.length==0){
                dsmDialog.error('请先选择网卡！');
                return;
            }
            showDelModel();
        });

        //重启网卡
        $(document).on('click','.js_restart',function(e){
            chkItem=itemSelected_check("uids");
            if(chkItem.length==0){
                dsmDialog.error('请先选择网卡！');
                return;
            }
            restartModel();
        });
    });

    //删除弹框
    function showDelModel() {
        dsmDialog.toComfirm("请确认是否删除当前网卡信息！", {
            btn: ['确定','取消'],
            title:"删除"
        }, function(index){
            //删除操作代码
            dsmDialog.msg('删除成功！');
            dsmDialog.close(index);
        }, function(index){
            dsmDialog.close(index);
        });
    }
    //修改弹框
    function editNet(obj){
        var netId=$(obj).data("id");
        if(netId!=""&&netId!=undefined){
            $(".NetForm").attr('id',"editNetForm");
        }
        dsmDialog.open({
            type: 1,
            area:['560px','520px'],
            btn:['修改','取消'],
            title:"修改网卡",
            content: $('#editNetForm'),
            yes: function(index, layero){
                dsmDialog.msg('修改成功!');
                dsmDialog.close(index);
            }
        });

    }
    //重启弹框
    function restartModel(){
        dsmDialog.toComfirm("系统将重启网卡服务！",{
            btn:['确定','取消'],
            title:'重启'
        },function(index){
            dsmDialog.msg('重启成功！');
            dsmDialog.close(index);
        },function(index){
            dsmDialog.close(index);
        });
    }

</script>
</body>
</html>